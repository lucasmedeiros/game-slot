{"ast":null,"code":"var _jsxFileName = \"/home/lucas/Git/game-slot/src/pages/Auth/Login/index.tsx\";\nimport React, { useEffect, useState } from 'react';\nimport { Redirect, Link, useLocation } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setUser } from '../../../store/user/actions';\nimport { login } from '../../../services/auth.service';\n\nconst Login = () => {\n  var _location$state$from, _location$state;\n\n  const user = useSelector(state => state.userReducer.user);\n  const [submissionError, setSubmissionError] = useState();\n  const [loggingIn, setLoggingIn] = useState(false);\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [usernameError, setUsernameError] = useState('');\n  const [passError, setPassError] = useState('');\n  const dispatch = useDispatch();\n  const location = useLocation();\n  useEffect(() => {\n    if (username) setUsernameError('');\n    if (password) setPassError('');\n  }, [username, password]);\n\n  const validateInputs = () => {\n    if (!username) setUsernameError(`'Username' is required`);\n    if (!password) setPassError(`'Password' is required`);\n  };\n\n  const onLogin = async e => {\n    e.preventDefault();\n\n    if (!loggingIn) {\n      validateInputs();\n\n      if (username && password) {\n        setLoggingIn(true);\n        const response = await login({\n          email: username,\n          password\n        });\n\n        if (response.success) {\n          dispatch(setUser(response.data));\n        } else {\n          setSubmissionError(response.message);\n        }\n\n        setLoggingIn(false);\n      }\n    }\n  };\n\n  return !user ? /*#__PURE__*/React.createElement(\"section\", {\n    className: \"w-full h-full flex items-center justify-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"bg-dark-700 w-full mt-5 mx-3 md:mx-0 md:w-1/2 px-3 py-2 md:px-8 md:py-6 rounded-lg\",\n    onSubmit: onLogin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"block text-gray-200 text-sm font-bold mb-2 uppercase\",\n    htmlFor: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 11\n    }\n  }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: `shadow appearance-none border ${usernameError ? 'border-red-600' : ''} border-dark-500 rounded placeholder-dark-300 w-full py-2 px-3 text-white leading-tight focus:outline-none bg-dark-600`,\n    id: \"email\",\n    type: \"text\",\n    autoComplete: \"none\",\n    placeholder: \"johndoe27\",\n    value: username,\n    onChange: e => setUsername(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  }), usernameError && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-red-500 text-xs italic mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, usernameError)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"block text-gray-200 text-sm font-bold mb-2 uppercase\",\n    htmlFor: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: `shadow appearance-none border ${passError ? 'border-red-600' : ''} border-dark-500 rounded w-full placeholder-dark-300 py-2 px-3 text-white mb-3 leading-tight focus:outline-none bg-dark-600`,\n    id: \"password\",\n    type: \"password\",\n    placeholder: \"********\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }), passError && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-red-500 text-xs italic\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, passError)), submissionError && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-red-500 mb-4 text-xs italic\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }, submissionError), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-col md:flex-row items-center justify-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: onLogin,\n    className: `bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline ${loggingIn ? 'opacity-50 cursor-not-allowed' : 'hover:bg-red-600'}`,\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, \"Sign In\"), /*#__PURE__*/React.createElement(Link, {\n    className: \"inline-block mt-3 md:mt-0 align-baseline font-bold text-sm text-white hover:text-blue-400\",\n    to: \"/new/account\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 11\n    }\n  }, \"Create account\")))) : /*#__PURE__*/React.createElement(Redirect, {\n    to: (_location$state$from = (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.from) !== null && _location$state$from !== void 0 ? _location$state$from : '/',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 5\n    }\n  });\n};\n\nexport default Login;","map":{"version":3,"sources":["/home/lucas/Git/game-slot/src/pages/Auth/Login/index.tsx"],"names":["React","useEffect","useState","Redirect","Link","useLocation","useDispatch","useSelector","setUser","login","Login","user","state","userReducer","submissionError","setSubmissionError","loggingIn","setLoggingIn","username","setUsername","password","setPassword","usernameError","setUsernameError","passError","setPassError","dispatch","location","validateInputs","onLogin","e","preventDefault","response","email","success","data","message","target","value","from"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Redirect, Link, useLocation } from 'react-router-dom'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { setUser } from '../../../store/user/actions'\nimport { RootState } from '../../../store'\nimport { login } from '../../../services/auth.service'\n\nconst Login: React.FC = () => {\n  const user = useSelector((state: RootState) => state.userReducer.user)\n  const [submissionError, setSubmissionError] = useState<string>()\n  const [loggingIn, setLoggingIn] = useState<boolean>(false)\n  const [username, setUsername] = useState<string>('')\n  const [password, setPassword] = useState<string>('')\n  const [usernameError, setUsernameError] = useState<string>('')\n  const [passError, setPassError] = useState<string>('')\n  const dispatch = useDispatch()\n  const location = useLocation<DefaultLocation>()\n\n  useEffect(() => {\n    if (username) setUsernameError('')\n    if (password) setPassError('')\n  }, [username, password])\n\n  const validateInputs = () => {\n    if (!username) setUsernameError(`'Username' is required`)\n    if (!password) setPassError(`'Password' is required`)\n  }\n\n  const onLogin = async (e: any) => {\n    e.preventDefault()\n    if (!loggingIn) {\n      validateInputs()\n\n      if (username && password) {\n        setLoggingIn(true)\n        const response = await login({ email: username, password })\n        if (response.success) {\n          dispatch(setUser(response.data))\n        } else {\n          setSubmissionError(response.message)\n        }\n        setLoggingIn(false)\n      }\n    }\n  }\n\n  return !user ? (\n    <section className=\"w-full h-full flex items-center justify-center\">\n      <form\n        className=\"bg-dark-700 w-full mt-5 mx-3 md:mx-0 md:w-1/2 px-3 py-2 md:px-8 md:py-6 rounded-lg\"\n        onSubmit={onLogin}\n      >\n        <div className=\"mb-6\">\n          <label\n            className=\"block text-gray-200 text-sm font-bold mb-2 uppercase\"\n            htmlFor=\"email\"\n          >\n            Username\n          </label>\n          <input\n            className={`shadow appearance-none border ${\n              usernameError ? 'border-red-600' : ''\n            } border-dark-500 rounded placeholder-dark-300 w-full py-2 px-3 text-white leading-tight focus:outline-none bg-dark-600`}\n            id=\"email\"\n            type=\"text\"\n            autoComplete=\"none\"\n            placeholder=\"johndoe27\"\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n          />\n          {usernameError && (\n            <p className=\"text-red-500 text-xs italic mt-2\">{usernameError}</p>\n          )}\n        </div>\n        <div className=\"mb-6\">\n          <label\n            className=\"block text-gray-200 text-sm font-bold mb-2 uppercase\"\n            htmlFor=\"password\"\n          >\n            Password\n          </label>\n          <input\n            className={`shadow appearance-none border ${\n              passError ? 'border-red-600' : ''\n            } border-dark-500 rounded w-full placeholder-dark-300 py-2 px-3 text-white mb-3 leading-tight focus:outline-none bg-dark-600`}\n            id=\"password\"\n            type=\"password\"\n            placeholder=\"********\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n          {passError && (\n            <p className=\"text-red-500 text-xs italic\">{passError}</p>\n          )}\n        </div>\n        {submissionError && (\n          <p className=\"text-red-500 mb-4 text-xs italic\">{submissionError}</p>\n        )}\n        <div className=\"flex flex-col md:flex-row items-center justify-between\">\n          <button\n            onClick={onLogin}\n            className={`bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline ${\n              loggingIn ? 'opacity-50 cursor-not-allowed' : 'hover:bg-red-600'\n            }`}\n            type=\"submit\"\n          >\n            Sign In\n          </button>\n          <Link\n            className=\"inline-block mt-3 md:mt-0 align-baseline font-bold text-sm text-white hover:text-blue-400\"\n            to=\"/new/account\"\n          >\n            Create account\n          </Link>\n        </div>\n      </form>\n    </section>\n  ) : (\n    <Redirect to={location.state?.from ?? '/'} />\n  )\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}