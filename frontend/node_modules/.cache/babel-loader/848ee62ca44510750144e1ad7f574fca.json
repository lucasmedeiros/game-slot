{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.FilePlayer = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _utils = require(\"../utils\");\n\nvar _singlePlayer = _interopRequireDefault(require(\"../singlePlayer\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _createSuper(Derived) {\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (_isNativeReflectConstruct()) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _createForOfIteratorHelper(o) {\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) {\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var it,\n      normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nvar IOS = typeof navigator !== 'undefined' && /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\nvar AUDIO_EXTENSIONS = /\\.(m4a|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\\?)/i;\nvar VIDEO_EXTENSIONS = /\\.(mp4|og[gv]|webm|mov|m4v)($|\\?)/i;\nvar HLS_EXTENSIONS = /\\.(m3u8)($|\\?)/i;\nvar HLS_SDK_URL = 'https://cdn.jsdelivr.net/npm/hls.js@VERSION/dist/hls.min.js';\nvar HLS_GLOBAL = 'Hls';\nvar DASH_EXTENSIONS = /\\.(mpd)($|\\?)/i;\nvar DASH_SDK_URL = 'https://cdnjs.cloudflare.com/ajax/libs/dashjs/VERSION/dash.all.min.js';\nvar DASH_GLOBAL = 'dashjs';\nvar MATCH_DROPBOX_URL = /www\\.dropbox\\.com\\/.+/;\n\nfunction canPlay(url) {\n  if (url instanceof Array) {\n    var _iterator = _createForOfIteratorHelper(url),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var item = _step.value;\n\n        if (typeof item === 'string' && canPlay(item)) {\n          return true;\n        }\n\n        if (canPlay(item.src)) {\n          return true;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    return false;\n  }\n\n  if ((0, _utils.isMediaStream)(url)) {\n    return true;\n  }\n\n  return AUDIO_EXTENSIONS.test(url) || VIDEO_EXTENSIONS.test(url) || HLS_EXTENSIONS.test(url) || DASH_EXTENSIONS.test(url);\n}\n\nfunction supportsWebKitPresentationMode(video) {\n  if (!video) video = document.createElement('video'); // Check if Safari supports PiP, and is not on mobile (other than iPad)\n  // iPhone safari appears to \"support\" PiP through the check, however PiP does not function\n\n  return video.webkitSupportsPresentationMode && typeof video.webkitSetPresentationMode === 'function' && !/iPhone|iPod/.test(navigator.userAgent);\n}\n\nfunction canEnablePIP(url) {\n  return canPlay(url) && (!!document.pictureInPictureEnabled || supportsWebKitPresentationMode()) && !AUDIO_EXTENSIONS.test(url);\n}\n\nvar FilePlayer = /*#__PURE__*/function (_Component) {\n  _inherits(FilePlayer, _Component);\n\n  var _super = _createSuper(FilePlayer);\n\n  function FilePlayer() {\n    var _this;\n\n    _classCallCheck(this, FilePlayer);\n\n    for (var _len = arguments.length, _args = new Array(_len), _key = 0; _key < _len; _key++) {\n      _args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(_args));\n\n    _defineProperty(_assertThisInitialized(_this), \"onReady\", function () {\n      var _this$props;\n\n      return (_this$props = _this.props).onReady.apply(_this$props, arguments);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onPlay\", function () {\n      var _this$props2;\n\n      return (_this$props2 = _this.props).onPlay.apply(_this$props2, arguments);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onBuffer\", function () {\n      var _this$props3;\n\n      return (_this$props3 = _this.props).onBuffer.apply(_this$props3, arguments);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onBufferEnd\", function () {\n      var _this$props4;\n\n      return (_this$props4 = _this.props).onBufferEnd.apply(_this$props4, arguments);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onPause\", function () {\n      var _this$props5;\n\n      return (_this$props5 = _this.props).onPause.apply(_this$props5, arguments);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onEnded\", function () {\n      var _this$props6;\n\n      return (_this$props6 = _this.props).onEnded.apply(_this$props6, arguments);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onError\", function () {\n      var _this$props7;\n\n      return (_this$props7 = _this.props).onError.apply(_this$props7, arguments);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onEnablePIP\", function () {\n      var _this$props8;\n\n      return (_this$props8 = _this.props).onEnablePIP.apply(_this$props8, arguments);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDisablePIP\", function (e) {\n      var _this$props9 = _this.props,\n          onDisablePIP = _this$props9.onDisablePIP,\n          playing = _this$props9.playing;\n      onDisablePIP(e);\n\n      if (playing) {\n        _this.play();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onPresentationModeChange\", function (e) {\n      if (_this.player && supportsWebKitPresentationMode(_this.player)) {\n        var webkitPresentationMode = _this.player.webkitPresentationMode;\n\n        if (webkitPresentationMode === 'picture-in-picture') {\n          _this.onEnablePIP(e);\n        } else if (webkitPresentationMode === 'inline') {\n          _this.onDisablePIP(e);\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSeek\", function (e) {\n      _this.props.onSeek(e.target.currentTime);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"mute\", function () {\n      _this.player.muted = true;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unmute\", function () {\n      _this.player.muted = false;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderSourceElement\", function (source, index) {\n      if (typeof source === 'string') {\n        return /*#__PURE__*/_react[\"default\"].createElement(\"source\", {\n          key: index,\n          src: source\n        });\n      }\n\n      return /*#__PURE__*/_react[\"default\"].createElement(\"source\", _extends({\n        key: index\n      }, source));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderTrack\", function (track, index) {\n      return /*#__PURE__*/_react[\"default\"].createElement(\"track\", _extends({\n        key: index\n      }, track));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"ref\", function (player) {\n      if (_this.player) {\n        // Store previous player to be used by removeListeners()\n        _this.prevPlayer = _this.player;\n      }\n\n      _this.player = player;\n    });\n\n    return _this;\n  }\n\n  _createClass(FilePlayer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.addListeners(this.player);\n\n      if (IOS) {\n        this.player.load();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.shouldUseAudio(this.props) !== this.shouldUseAudio(prevProps)) {\n        this.removeListeners(this.prevPlayer);\n        this.addListeners(this.player);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.removeListeners(this.player);\n\n      if (this.hls) {\n        this.hls.destroy();\n      }\n    }\n  }, {\n    key: \"addListeners\",\n    value: function addListeners(player) {\n      var playsinline = this.props.playsinline;\n      player.addEventListener('canplay', this.onReady);\n      player.addEventListener('play', this.onPlay);\n      player.addEventListener('waiting', this.onBuffer);\n      player.addEventListener('playing', this.onBufferEnd);\n      player.addEventListener('pause', this.onPause);\n      player.addEventListener('seeked', this.onSeek);\n      player.addEventListener('ended', this.onEnded);\n      player.addEventListener('error', this.onError);\n      player.addEventListener('enterpictureinpicture', this.onEnablePIP);\n      player.addEventListener('leavepictureinpicture', this.onDisablePIP);\n      player.addEventListener('webkitpresentationmodechanged', this.onPresentationModeChange);\n\n      if (playsinline) {\n        player.setAttribute('playsinline', '');\n        player.setAttribute('webkit-playsinline', '');\n        player.setAttribute('x5-playsinline', '');\n      }\n    }\n  }, {\n    key: \"removeListeners\",\n    value: function removeListeners(player) {\n      player.removeEventListener('canplay', this.onReady);\n      player.removeEventListener('play', this.onPlay);\n      player.removeEventListener('waiting', this.onBuffer);\n      player.removeEventListener('playing', this.onBufferEnd);\n      player.removeEventListener('pause', this.onPause);\n      player.removeEventListener('seeked', this.onSeek);\n      player.removeEventListener('ended', this.onEnded);\n      player.removeEventListener('error', this.onError);\n      player.removeEventListener('enterpictureinpicture', this.onEnablePIP);\n      player.removeEventListener('leavepictureinpicture', this.onDisablePIP);\n      player.removeEventListener('webkitpresentationmodechanged', this.onPresentationModeChange);\n    } // Proxy methods to prevent listener leaks\n\n  }, {\n    key: \"shouldUseAudio\",\n    value: function shouldUseAudio(props) {\n      if (props.config.file.forceVideo) {\n        return false;\n      }\n\n      if (props.config.file.attributes.poster) {\n        return false; // Use <video> so that poster is shown\n      }\n\n      return AUDIO_EXTENSIONS.test(props.url) || props.config.file.forceAudio;\n    }\n  }, {\n    key: \"shouldUseHLS\",\n    value: function shouldUseHLS(url) {\n      return HLS_EXTENSIONS.test(url) && !IOS || this.props.config.file.forceHLS;\n    }\n  }, {\n    key: \"shouldUseDASH\",\n    value: function shouldUseDASH(url) {\n      return DASH_EXTENSIONS.test(url) || this.props.config.file.forceDASH;\n    }\n  }, {\n    key: \"load\",\n    value: function load(url) {\n      var _this2 = this;\n\n      var _this$props$config$fi = this.props.config.file,\n          hlsVersion = _this$props$config$fi.hlsVersion,\n          dashVersion = _this$props$config$fi.dashVersion;\n\n      if (this.shouldUseHLS(url)) {\n        (0, _utils.getSDK)(HLS_SDK_URL.replace('VERSION', hlsVersion), HLS_GLOBAL).then(function (Hls) {\n          _this2.hls = new Hls(_this2.props.config.file.hlsOptions);\n\n          _this2.hls.on(Hls.Events.ERROR, function (e, data) {\n            _this2.props.onError(e, data, _this2.hls, Hls);\n          });\n\n          _this2.hls.loadSource(url);\n\n          _this2.hls.attachMedia(_this2.player);\n        });\n      }\n\n      if (this.shouldUseDASH(url)) {\n        (0, _utils.getSDK)(DASH_SDK_URL.replace('VERSION', dashVersion), DASH_GLOBAL).then(function (dashjs) {\n          _this2.dash = dashjs.MediaPlayer().create();\n\n          _this2.dash.initialize(_this2.player, url, _this2.props.playing);\n\n          _this2.dash.on('error', _this2.props.onError);\n\n          _this2.dash.getDebug().setLogToBrowserConsole(false);\n        });\n      }\n\n      if (url instanceof Array) {\n        // When setting new urls (<source>) on an already loaded video,\n        // HTMLMediaElement.load() is needed to reset the media element\n        // and restart the media resource. Just replacing children source\n        // dom nodes is not enough\n        this.player.load();\n      } else if ((0, _utils.isMediaStream)(url)) {\n        try {\n          this.player.srcObject = url;\n        } catch (e) {\n          this.player.src = window.URL.createObjectURL(url);\n        }\n      }\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      var promise = this.player.play();\n\n      if (promise) {\n        promise[\"catch\"](this.props.onError);\n      }\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      this.player.pause();\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      this.player.removeAttribute('src');\n\n      if (this.dash) {\n        this.dash.reset();\n      }\n    }\n  }, {\n    key: \"seekTo\",\n    value: function seekTo(seconds) {\n      this.player.currentTime = seconds;\n    }\n  }, {\n    key: \"setVolume\",\n    value: function setVolume(fraction) {\n      this.player.volume = fraction;\n    }\n  }, {\n    key: \"enablePIP\",\n    value: function enablePIP() {\n      if (this.player.requestPictureInPicture && document.pictureInPictureElement !== this.player) {\n        this.player.requestPictureInPicture();\n      } else if (supportsWebKitPresentationMode(this.player) && this.player.webkitPresentationMode !== 'picture-in-picture') {\n        this.player.webkitSetPresentationMode('picture-in-picture');\n      }\n    }\n  }, {\n    key: \"disablePIP\",\n    value: function disablePIP() {\n      if (document.exitPictureInPicture && document.pictureInPictureElement === this.player) {\n        document.exitPictureInPicture();\n      } else if (supportsWebKitPresentationMode(this.player) && this.player.webkitPresentationMode !== 'inline') {\n        this.player.webkitSetPresentationMode('inline');\n      }\n    }\n  }, {\n    key: \"setPlaybackRate\",\n    value: function setPlaybackRate(rate) {\n      this.player.playbackRate = rate;\n    }\n  }, {\n    key: \"getDuration\",\n    value: function getDuration() {\n      if (!this.player) return null;\n      var _this$player = this.player,\n          duration = _this$player.duration,\n          seekable = _this$player.seekable; // on iOS, live streams return Infinity for the duration\n      // so instead we use the end of the seekable timerange\n\n      if (duration === Infinity && seekable.length > 0) {\n        return seekable.end(seekable.length - 1);\n      }\n\n      return duration;\n    }\n  }, {\n    key: \"getCurrentTime\",\n    value: function getCurrentTime() {\n      if (!this.player) return null;\n      return this.player.currentTime;\n    }\n  }, {\n    key: \"getSecondsLoaded\",\n    value: function getSecondsLoaded() {\n      if (!this.player) return null;\n      var buffered = this.player.buffered;\n\n      if (buffered.length === 0) {\n        return 0;\n      }\n\n      var end = buffered.end(buffered.length - 1);\n      var duration = this.getDuration();\n\n      if (end > duration) {\n        return duration;\n      }\n\n      return end;\n    }\n  }, {\n    key: \"getSource\",\n    value: function getSource(url) {\n      var useHLS = this.shouldUseHLS(url);\n      var useDASH = this.shouldUseDASH(url);\n\n      if (url instanceof Array || (0, _utils.isMediaStream)(url) || useHLS || useDASH) {\n        return undefined;\n      }\n\n      if (MATCH_DROPBOX_URL.test(url)) {\n        return url.replace('www.dropbox.com', 'dl.dropboxusercontent.com');\n      }\n\n      return url;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props10 = this.props,\n          url = _this$props10.url,\n          playing = _this$props10.playing,\n          loop = _this$props10.loop,\n          controls = _this$props10.controls,\n          muted = _this$props10.muted,\n          config = _this$props10.config,\n          width = _this$props10.width,\n          height = _this$props10.height;\n      var useAudio = this.shouldUseAudio(this.props);\n      var Element = useAudio ? 'audio' : 'video';\n      var style = {\n        width: width === 'auto' ? width : '100%',\n        height: height === 'auto' ? height : '100%'\n      };\n      return /*#__PURE__*/_react[\"default\"].createElement(Element, _extends({\n        ref: this.ref,\n        src: this.getSource(url),\n        style: style,\n        preload: \"auto\",\n        autoPlay: playing || undefined,\n        controls: controls,\n        muted: muted,\n        loop: loop\n      }, config.file.attributes), url instanceof Array && url.map(this.renderSourceElement), config.file.tracks.map(this.renderTrack));\n    }\n  }]);\n\n  return FilePlayer;\n}(_react.Component);\n\nexports.FilePlayer = FilePlayer;\n\n_defineProperty(FilePlayer, \"displayName\", 'FilePlayer');\n\n_defineProperty(FilePlayer, \"canPlay\", canPlay);\n\n_defineProperty(FilePlayer, \"canEnablePIP\", canEnablePIP);\n\nvar _default = (0, _singlePlayer[\"default\"])(FilePlayer);\n\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/home/lucas/Git/game-slot/node_modules/react-player/lib/players/FilePlayer.js"],"names":["Object","defineProperty","exports","value","FilePlayer","_react","_interopRequireWildcard","require","_utils","_singlePlayer","_interopRequireDefault","obj","__esModule","_getRequireWildcardCache","WeakMap","cache","_typeof","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","Symbol","iterator","constructor","_extends","assign","target","i","arguments","length","source","apply","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","enumerable","configurable","writable","_createClass","protoProps","staticProps","_createSuper","Derived","Super","_getPrototypeOf","result","_isNativeReflectConstruct","NewTarget","Reflect","construct","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Date","toString","e","o","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","create","_setPrototypeOf","p","_defineProperty","_createForOfIteratorHelper","Array","isArray","_unsupportedIterableToArray","F","s","n","done","_e","f","it","normalCompletion","didErr","err","step","next","_e2","minLen","_arrayLikeToArray","slice","name","from","test","arr","len","arr2","IOS","navigator","userAgent","window","MSStream","AUDIO_EXTENSIONS","VIDEO_EXTENSIONS","HLS_EXTENSIONS","HLS_SDK_URL","HLS_GLOBAL","DASH_EXTENSIONS","DASH_SDK_URL","DASH_GLOBAL","MATCH_DROPBOX_URL","canPlay","url","_iterator","_step","item","src","isMediaStream","supportsWebKitPresentationMode","video","document","createElement","webkitSupportsPresentationMode","webkitSetPresentationMode","canEnablePIP","pictureInPictureEnabled","_Component","_super","_this","_len","_args","_key","concat","_this$props","onReady","_this$props2","onPlay","_this$props3","onBuffer","_this$props4","onBufferEnd","_this$props5","onPause","_this$props6","onEnded","_this$props7","onError","_this$props8","onEnablePIP","_this$props9","onDisablePIP","playing","play","player","webkitPresentationMode","onSeek","currentTime","muted","index","track","prevPlayer","componentDidMount","addListeners","load","componentDidUpdate","prevProps","shouldUseAudio","removeListeners","componentWillUnmount","hls","destroy","playsinline","addEventListener","onPresentationModeChange","setAttribute","removeEventListener","config","file","forceVideo","attributes","poster","forceAudio","shouldUseHLS","forceHLS","shouldUseDASH","forceDASH","_this2","_this$props$config$fi","hlsVersion","dashVersion","getSDK","replace","then","Hls","hlsOptions","on","Events","ERROR","data","loadSource","attachMedia","dashjs","dash","MediaPlayer","initialize","getDebug","setLogToBrowserConsole","srcObject","URL","createObjectURL","promise","pause","stop","removeAttribute","reset","seekTo","seconds","setVolume","fraction","volume","enablePIP","requestPictureInPicture","pictureInPictureElement","disablePIP","exitPictureInPicture","setPlaybackRate","rate","playbackRate","getDuration","_this$player","duration","seekable","Infinity","end","getCurrentTime","getSecondsLoaded","buffered","getSource","useHLS","useDASH","undefined","render","_this$props10","loop","controls","width","height","useAudio","Element","style","ref","preload","autoPlay","map","renderSourceElement","tracks","renderTrack","Component","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.FilePlayer = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _utils = require(\"../utils\");\n\nvar _singlePlayer = _interopRequireDefault(require(\"../singlePlayer\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _createForOfIteratorHelper(o) { if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(n); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar IOS = typeof navigator !== 'undefined' && /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\nvar AUDIO_EXTENSIONS = /\\.(m4a|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\\?)/i;\nvar VIDEO_EXTENSIONS = /\\.(mp4|og[gv]|webm|mov|m4v)($|\\?)/i;\nvar HLS_EXTENSIONS = /\\.(m3u8)($|\\?)/i;\nvar HLS_SDK_URL = 'https://cdn.jsdelivr.net/npm/hls.js@VERSION/dist/hls.min.js';\nvar HLS_GLOBAL = 'Hls';\nvar DASH_EXTENSIONS = /\\.(mpd)($|\\?)/i;\nvar DASH_SDK_URL = 'https://cdnjs.cloudflare.com/ajax/libs/dashjs/VERSION/dash.all.min.js';\nvar DASH_GLOBAL = 'dashjs';\nvar MATCH_DROPBOX_URL = /www\\.dropbox\\.com\\/.+/;\n\nfunction canPlay(url) {\n  if (url instanceof Array) {\n    var _iterator = _createForOfIteratorHelper(url),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var item = _step.value;\n\n        if (typeof item === 'string' && canPlay(item)) {\n          return true;\n        }\n\n        if (canPlay(item.src)) {\n          return true;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    return false;\n  }\n\n  if ((0, _utils.isMediaStream)(url)) {\n    return true;\n  }\n\n  return AUDIO_EXTENSIONS.test(url) || VIDEO_EXTENSIONS.test(url) || HLS_EXTENSIONS.test(url) || DASH_EXTENSIONS.test(url);\n}\n\nfunction supportsWebKitPresentationMode(video) {\n  if (!video) video = document.createElement('video'); // Check if Safari supports PiP, and is not on mobile (other than iPad)\n  // iPhone safari appears to \"support\" PiP through the check, however PiP does not function\n\n  return video.webkitSupportsPresentationMode && typeof video.webkitSetPresentationMode === 'function' && !/iPhone|iPod/.test(navigator.userAgent);\n}\n\nfunction canEnablePIP(url) {\n  return canPlay(url) && (!!document.pictureInPictureEnabled || supportsWebKitPresentationMode()) && !AUDIO_EXTENSIONS.test(url);\n}\n\nvar FilePlayer = /*#__PURE__*/function (_Component) {\n  _inherits(FilePlayer, _Component);\n\n  var _super = _createSuper(FilePlayer);\n\n  function FilePlayer() {\n    var _this;\n\n    _classCallCheck(this, FilePlayer);\n\n    for (var _len = arguments.length, _args = new Array(_len), _key = 0; _key < _len; _key++) {\n      _args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(_args));\n\n    _defineProperty(_assertThisInitialized(_this), \"onReady\", function () {\n      var _this$props;\n\n      return (_this$props = _this.props).onReady.apply(_this$props, arguments);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onPlay\", function () {\n      var _this$props2;\n\n      return (_this$props2 = _this.props).onPlay.apply(_this$props2, arguments);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onBuffer\", function () {\n      var _this$props3;\n\n      return (_this$props3 = _this.props).onBuffer.apply(_this$props3, arguments);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onBufferEnd\", function () {\n      var _this$props4;\n\n      return (_this$props4 = _this.props).onBufferEnd.apply(_this$props4, arguments);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onPause\", function () {\n      var _this$props5;\n\n      return (_this$props5 = _this.props).onPause.apply(_this$props5, arguments);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onEnded\", function () {\n      var _this$props6;\n\n      return (_this$props6 = _this.props).onEnded.apply(_this$props6, arguments);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onError\", function () {\n      var _this$props7;\n\n      return (_this$props7 = _this.props).onError.apply(_this$props7, arguments);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onEnablePIP\", function () {\n      var _this$props8;\n\n      return (_this$props8 = _this.props).onEnablePIP.apply(_this$props8, arguments);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDisablePIP\", function (e) {\n      var _this$props9 = _this.props,\n          onDisablePIP = _this$props9.onDisablePIP,\n          playing = _this$props9.playing;\n      onDisablePIP(e);\n\n      if (playing) {\n        _this.play();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onPresentationModeChange\", function (e) {\n      if (_this.player && supportsWebKitPresentationMode(_this.player)) {\n        var webkitPresentationMode = _this.player.webkitPresentationMode;\n\n        if (webkitPresentationMode === 'picture-in-picture') {\n          _this.onEnablePIP(e);\n        } else if (webkitPresentationMode === 'inline') {\n          _this.onDisablePIP(e);\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSeek\", function (e) {\n      _this.props.onSeek(e.target.currentTime);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"mute\", function () {\n      _this.player.muted = true;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unmute\", function () {\n      _this.player.muted = false;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderSourceElement\", function (source, index) {\n      if (typeof source === 'string') {\n        return /*#__PURE__*/_react[\"default\"].createElement(\"source\", {\n          key: index,\n          src: source\n        });\n      }\n\n      return /*#__PURE__*/_react[\"default\"].createElement(\"source\", _extends({\n        key: index\n      }, source));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderTrack\", function (track, index) {\n      return /*#__PURE__*/_react[\"default\"].createElement(\"track\", _extends({\n        key: index\n      }, track));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"ref\", function (player) {\n      if (_this.player) {\n        // Store previous player to be used by removeListeners()\n        _this.prevPlayer = _this.player;\n      }\n\n      _this.player = player;\n    });\n\n    return _this;\n  }\n\n  _createClass(FilePlayer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.addListeners(this.player);\n\n      if (IOS) {\n        this.player.load();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.shouldUseAudio(this.props) !== this.shouldUseAudio(prevProps)) {\n        this.removeListeners(this.prevPlayer);\n        this.addListeners(this.player);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.removeListeners(this.player);\n\n      if (this.hls) {\n        this.hls.destroy();\n      }\n    }\n  }, {\n    key: \"addListeners\",\n    value: function addListeners(player) {\n      var playsinline = this.props.playsinline;\n      player.addEventListener('canplay', this.onReady);\n      player.addEventListener('play', this.onPlay);\n      player.addEventListener('waiting', this.onBuffer);\n      player.addEventListener('playing', this.onBufferEnd);\n      player.addEventListener('pause', this.onPause);\n      player.addEventListener('seeked', this.onSeek);\n      player.addEventListener('ended', this.onEnded);\n      player.addEventListener('error', this.onError);\n      player.addEventListener('enterpictureinpicture', this.onEnablePIP);\n      player.addEventListener('leavepictureinpicture', this.onDisablePIP);\n      player.addEventListener('webkitpresentationmodechanged', this.onPresentationModeChange);\n\n      if (playsinline) {\n        player.setAttribute('playsinline', '');\n        player.setAttribute('webkit-playsinline', '');\n        player.setAttribute('x5-playsinline', '');\n      }\n    }\n  }, {\n    key: \"removeListeners\",\n    value: function removeListeners(player) {\n      player.removeEventListener('canplay', this.onReady);\n      player.removeEventListener('play', this.onPlay);\n      player.removeEventListener('waiting', this.onBuffer);\n      player.removeEventListener('playing', this.onBufferEnd);\n      player.removeEventListener('pause', this.onPause);\n      player.removeEventListener('seeked', this.onSeek);\n      player.removeEventListener('ended', this.onEnded);\n      player.removeEventListener('error', this.onError);\n      player.removeEventListener('enterpictureinpicture', this.onEnablePIP);\n      player.removeEventListener('leavepictureinpicture', this.onDisablePIP);\n      player.removeEventListener('webkitpresentationmodechanged', this.onPresentationModeChange);\n    } // Proxy methods to prevent listener leaks\n\n  }, {\n    key: \"shouldUseAudio\",\n    value: function shouldUseAudio(props) {\n      if (props.config.file.forceVideo) {\n        return false;\n      }\n\n      if (props.config.file.attributes.poster) {\n        return false; // Use <video> so that poster is shown\n      }\n\n      return AUDIO_EXTENSIONS.test(props.url) || props.config.file.forceAudio;\n    }\n  }, {\n    key: \"shouldUseHLS\",\n    value: function shouldUseHLS(url) {\n      return HLS_EXTENSIONS.test(url) && !IOS || this.props.config.file.forceHLS;\n    }\n  }, {\n    key: \"shouldUseDASH\",\n    value: function shouldUseDASH(url) {\n      return DASH_EXTENSIONS.test(url) || this.props.config.file.forceDASH;\n    }\n  }, {\n    key: \"load\",\n    value: function load(url) {\n      var _this2 = this;\n\n      var _this$props$config$fi = this.props.config.file,\n          hlsVersion = _this$props$config$fi.hlsVersion,\n          dashVersion = _this$props$config$fi.dashVersion;\n\n      if (this.shouldUseHLS(url)) {\n        (0, _utils.getSDK)(HLS_SDK_URL.replace('VERSION', hlsVersion), HLS_GLOBAL).then(function (Hls) {\n          _this2.hls = new Hls(_this2.props.config.file.hlsOptions);\n\n          _this2.hls.on(Hls.Events.ERROR, function (e, data) {\n            _this2.props.onError(e, data, _this2.hls, Hls);\n          });\n\n          _this2.hls.loadSource(url);\n\n          _this2.hls.attachMedia(_this2.player);\n        });\n      }\n\n      if (this.shouldUseDASH(url)) {\n        (0, _utils.getSDK)(DASH_SDK_URL.replace('VERSION', dashVersion), DASH_GLOBAL).then(function (dashjs) {\n          _this2.dash = dashjs.MediaPlayer().create();\n\n          _this2.dash.initialize(_this2.player, url, _this2.props.playing);\n\n          _this2.dash.on('error', _this2.props.onError);\n\n          _this2.dash.getDebug().setLogToBrowserConsole(false);\n        });\n      }\n\n      if (url instanceof Array) {\n        // When setting new urls (<source>) on an already loaded video,\n        // HTMLMediaElement.load() is needed to reset the media element\n        // and restart the media resource. Just replacing children source\n        // dom nodes is not enough\n        this.player.load();\n      } else if ((0, _utils.isMediaStream)(url)) {\n        try {\n          this.player.srcObject = url;\n        } catch (e) {\n          this.player.src = window.URL.createObjectURL(url);\n        }\n      }\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      var promise = this.player.play();\n\n      if (promise) {\n        promise[\"catch\"](this.props.onError);\n      }\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      this.player.pause();\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      this.player.removeAttribute('src');\n\n      if (this.dash) {\n        this.dash.reset();\n      }\n    }\n  }, {\n    key: \"seekTo\",\n    value: function seekTo(seconds) {\n      this.player.currentTime = seconds;\n    }\n  }, {\n    key: \"setVolume\",\n    value: function setVolume(fraction) {\n      this.player.volume = fraction;\n    }\n  }, {\n    key: \"enablePIP\",\n    value: function enablePIP() {\n      if (this.player.requestPictureInPicture && document.pictureInPictureElement !== this.player) {\n        this.player.requestPictureInPicture();\n      } else if (supportsWebKitPresentationMode(this.player) && this.player.webkitPresentationMode !== 'picture-in-picture') {\n        this.player.webkitSetPresentationMode('picture-in-picture');\n      }\n    }\n  }, {\n    key: \"disablePIP\",\n    value: function disablePIP() {\n      if (document.exitPictureInPicture && document.pictureInPictureElement === this.player) {\n        document.exitPictureInPicture();\n      } else if (supportsWebKitPresentationMode(this.player) && this.player.webkitPresentationMode !== 'inline') {\n        this.player.webkitSetPresentationMode('inline');\n      }\n    }\n  }, {\n    key: \"setPlaybackRate\",\n    value: function setPlaybackRate(rate) {\n      this.player.playbackRate = rate;\n    }\n  }, {\n    key: \"getDuration\",\n    value: function getDuration() {\n      if (!this.player) return null;\n      var _this$player = this.player,\n          duration = _this$player.duration,\n          seekable = _this$player.seekable; // on iOS, live streams return Infinity for the duration\n      // so instead we use the end of the seekable timerange\n\n      if (duration === Infinity && seekable.length > 0) {\n        return seekable.end(seekable.length - 1);\n      }\n\n      return duration;\n    }\n  }, {\n    key: \"getCurrentTime\",\n    value: function getCurrentTime() {\n      if (!this.player) return null;\n      return this.player.currentTime;\n    }\n  }, {\n    key: \"getSecondsLoaded\",\n    value: function getSecondsLoaded() {\n      if (!this.player) return null;\n      var buffered = this.player.buffered;\n\n      if (buffered.length === 0) {\n        return 0;\n      }\n\n      var end = buffered.end(buffered.length - 1);\n      var duration = this.getDuration();\n\n      if (end > duration) {\n        return duration;\n      }\n\n      return end;\n    }\n  }, {\n    key: \"getSource\",\n    value: function getSource(url) {\n      var useHLS = this.shouldUseHLS(url);\n      var useDASH = this.shouldUseDASH(url);\n\n      if (url instanceof Array || (0, _utils.isMediaStream)(url) || useHLS || useDASH) {\n        return undefined;\n      }\n\n      if (MATCH_DROPBOX_URL.test(url)) {\n        return url.replace('www.dropbox.com', 'dl.dropboxusercontent.com');\n      }\n\n      return url;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props10 = this.props,\n          url = _this$props10.url,\n          playing = _this$props10.playing,\n          loop = _this$props10.loop,\n          controls = _this$props10.controls,\n          muted = _this$props10.muted,\n          config = _this$props10.config,\n          width = _this$props10.width,\n          height = _this$props10.height;\n      var useAudio = this.shouldUseAudio(this.props);\n      var Element = useAudio ? 'audio' : 'video';\n      var style = {\n        width: width === 'auto' ? width : '100%',\n        height: height === 'auto' ? height : '100%'\n      };\n      return /*#__PURE__*/_react[\"default\"].createElement(Element, _extends({\n        ref: this.ref,\n        src: this.getSource(url),\n        style: style,\n        preload: \"auto\",\n        autoPlay: playing || undefined,\n        controls: controls,\n        muted: muted,\n        loop: loop\n      }, config.file.attributes), url instanceof Array && url.map(this.renderSourceElement), config.file.tracks.map(this.renderTrack));\n    }\n  }]);\n\n  return FilePlayer;\n}(_react.Component);\n\nexports.FilePlayer = FilePlayer;\n\n_defineProperty(FilePlayer, \"displayName\", 'FilePlayer');\n\n_defineProperty(FilePlayer, \"canPlay\", canPlay);\n\n_defineProperty(FilePlayer, \"canEnablePIP\", canEnablePIP);\n\nvar _default = (0, _singlePlayer[\"default\"])(FilePlayer);\n\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}